fn main() {
    println!("compound type");

    // ã‚¿ãƒ—ãƒ« (tuple type)
    // è¦ç´ ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹
    // ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã‚’ä½¿ã† 0 å§‹ã¾ã‚Šã®è¦ç´ ç•ªå·
    let t1 = (88, true);
    assert_eq!(t1.0, 88);
    assert_eq!(t1.1, true);

    // ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã«ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã®å®šæ•°ã®ã¿ä½¿ãˆã‚‹ï¼å¤‰æ•°ã¯ä¸å¯
    // let i = 0;
    // let t1a = t1.i;

    // è¦ç´ ã‚’æ›¸ãæ›ãˆã‚‹ã®ã§ï¼Œå¤‰æ•° t2 ã« mut ã‚’ä»˜ã‘ã¦å¯å¤‰ã«ã™ã‚‹
    let mut t2 = (88, true);
    // ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ 0 ã®è¦ç´ ã‚’æ›¸ãæ›ãˆã‚‹
    t2.0 += 100; // ç¾åœ¨ã®å€¤ã« 100 ã‚’è¶³ã™
    assert_eq!(t2, (188, true));

    // ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã§åˆ†è§£ã™ã‚‹
    let (n1, b1) = (88, true);
    assert_eq!(n1, 88);
    assert_eq!(b1, true);

    let ((x1, y1), (x2, y2)) = ((0, 5), (10, -1));
    assert_eq!(x1, 0);
    assert_eq!(y1, 5);
    assert_eq!(x2, 10);
    assert_eq!(y2, -1);

    // ä¸è¦ãªå€¤ã¯ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ã‚’ä½¿ã†ã¨ç„¡è¦–ã§ãã‚‹
    let ((x3, y3), _) = ((0, 5), (10, -1));
    assert_eq!(x3, 0);
    assert_eq!(y3, 5);

    // è¦ç´ ã‚’æ›¸ãæ›ãˆã‚‹ã®ã§ï¼Œå¤‰æ•° t3 ã« mut ã‚’ä»˜ã‘ã¦å¯å¤‰ã«ã™ã‚‹
    let mut t3 = ((0, 5), (10, -1));

    // è¦ç´ ã‚’æŒ‡ã™å¯å¤‰ã®å‚ç…§ã‚’å¾—ã‚‹ãŸã‚ã« ref mut ã‚’è¿½åŠ ã™ã‚‹
    let ((ref mut x1_ptr, ref mut y1_ptr), _) = t3;

    // * ã‚’ä»˜ã‘ã‚‹ã“ã¨ã§ãƒã‚¤ãƒ³ã‚¿ãŒæŒ‡ã™ã‚¢ãƒ‰ãƒ¬ã‚¹ã«ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹
    *x1_ptr += 3;
    *y1_ptr *= -1;

    assert_eq!(t3, ((3, -5), (10, -1)));

    // é…åˆ— (array type)
    let _a1 = [false, true, false]; // [bol; 3] å‹
    let a2 = [0.0, -1.0, 1.0, 0.5]; // [f64; 4] å‹

    // len() ã§é…åˆ—ã®é•·ã•ã‚’å¾—ã‚‰ã‚Œã‚‹
    assert_eq!(a2.len(), 4);

    // é•·ã• 100 ã®é…åˆ—ã‚’ä½œã‚Šï¼Œå…¨è¦ç´ ã‚’ 0i32 ã§åˆæœŸåŒ–ã™ã‚‹
    // (è¦ç´ ã®å‹ã¯ Copy ãƒˆãƒ¬ã‚¤ãƒˆã‚’å®Ÿè£…ã—ã¦ã„ãªã‘ã‚Œã°ãªã‚‰ãªã„)
    let a3 = [0; 100]; // [i32; 100] å‹
    assert_eq!(a3.len(), 100);

    // é…åˆ—ã¯å…¥ã‚Œå­ã«ã§ãã‚‹
    let _a4 = [['a', 'b'], ['c', 'd']]; // [[char; 2]; 2] å‹ï¼2 æ¬¡å…ƒé…åˆ—

    // é…åˆ—ã¯åŒã˜å‹ã®è¦ç´ ã®ä¸¦ã³ï¼ç•°ãªã‚‹å‹ã®è¦ç´ ã¯æŒã¦ãªã„
    // let a5 = [false, 'a']; // error

    // é…åˆ—ã®é•·ã•ã¯å®Ÿè¡Œæ™‚ã«æŒ‡å®šã§ããªã„
    let size = 100;
    // let _a5 = [0; size]; // error ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚å®šæ•°ãŒè¦æ±‚ã•ã‚Œã‚‹å ´æ‰€ã«å®šæ•°ã§ãªã„å€¤ãŒã‚ã‚‹

    // ãƒ™ã‚¯ã‚¿ãªã‚‰å®Ÿè¡Œæ™‚ã«é•·ã•ã‚’æŒ‡å®šã§ãã‚‹
    let mut v1 = vec![0; size]; // Vec<i32> å‹
    assert_eq!(v1.len(), 100);

    // ãƒ™ã‚¯ã‚¿ã«ã¯è¦ç´ ã‚’è¿½åŠ ã—ãŸã‚Šï¼Œå‰Šé™¤ã—ãŸã‚Šã§ãã‚‹ï¼
    v1.push(1); // ãƒ™ã‚¯ã‚¿ã®æœ€å¾Œå°¾ã«è¦ç´ ã‚’è¿½åŠ ã™ã‚‹
    assert_eq!(v1.len(), 101); // é•·ã•ã¯ 100
    assert_eq!(v1.pop(), Some(1)); // ãƒ™ã‚¯ã‚¿ã®æœ€å¾Œå°¾ã‹ã‚‰è¦ç´ ã‚’å–ã‚Šé™¤ã
    assert_eq!(v1.len(), 100); // é•·ã•ã¯ 100 ã«æˆ»ã‚‹

    // è¦ç´ ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹
    let array1 = ['H', 'e', 'l', 'l', 'o'];
    assert_eq!(array1[1], 'e');

    let mut array2 = [0, 1, 2];
    array2[1] = 10;
    assert_eq!(array2, [0, 10, 2]);

    // ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¯å®šæ•°ã§ãªãã¦ã‚‚æ§‹ã‚ãªã„
    let mut index = 0;
    assert_eq!(array2[index], 0);
    index += 1;
    assert_eq!(array2[index], 10);

    let array3 = [0, 1];
    // array3[2]; // error ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒç¯„å›²å¤–

    // let index = 2;
    // array3[index]; // ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãšï¼Œå®Ÿè¡Œæ™‚ã«ãƒ‘ãƒ‹ãƒƒã‚¯ã™ã‚‹

    // get() ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã¨ãƒ‘ãƒ‹ãƒƒã‚¯ã—ãªã„
    assert_eq!(array3.get(1), Some(&1)); // get() ã¯ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒç¯„å›²å†…ã®ã¨ãã¯ Some(&å€¤) ã‚’è¿”ã™
    assert_eq!(array3.get(2), None); // ã•ã‚‚ãªã‘ã‚Œã° None ã‚’è¿”ã™

    // ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’ä½¿ã†
    let array4 = ['a'; 50]; // é•·ã• 50

    // iter() ã§è¦ç´ ãŒä¸å¤‰ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’ä½œæˆ
    for ch in array4.iter() {
        print!("{}", *ch);
    }
    println!();

    let mut array5 = [1; 32];

    // iter_mut() ã§è¦ç´ ãŒå¯å¤‰ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’ä½œæˆ
    for n in array5.iter_mut() {
        *n *= 2;
    }
    println!("{:?}", array5);

    // ã‚¹ãƒ©ã‚¤ã‚¹ (slice type)
    // é…åˆ—
    let a6 = ['a', 'b', 'c', 'd']; // å‚ç…§å…ƒã®ãƒ‡ãƒ¼ã‚¿ [char; 4] å‹
    println!("a6: {:?}", a6);

    print_info("&a6[..]", &a6[..]); // &[char] å‹ï¼å…¨è¦ç´ ã®ã‚¹ãƒ©ã‚¤ã‚¹
    print_info("&a6", &a6); // åŒä¸Š
    print_info("&a6[1..3]", &a6[1..3]); // b ã¨ c ã‚’è¦ç´ ã¨ã™ã‚‹é•·ã• 2 ã®ã‚¹ãƒ©ã‚¤ã‚¹

    // ãƒ™ã‚¯ã‚¿
    let v1 = vec!['e', 'f', 'g', 'h'];
    println!("v1: {:?}", v1);

    print_info("&v1[..]", &v1[..]); // &[char] å‹ï¼å…¨è¦ç´ ã®ã‚¹ãƒ©ã‚¤ã‚¹
    print_info("&v1", &v1); // åŒä¸Š
    print_info("&v1[1..3]", &v1[1..3]); // &[char]å‹ï¼f ã¨ g ã‚’è¦ç´ ã¨ã™ã‚‹é•·ã• 2 ã®ã‚¹ãƒ©ã‚¤ã‚¹

    // ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ãªã‚¹ãƒ©ã‚¤ã‚¹
    let mut a7 = [5, 4, 3, 2]; // é…åˆ—ï¼[i32; 4] å‹
    let s1 = &mut a7[1..3]; // å¯å¤‰ã‚¹ãƒ©ã‚¤ã‚¹ï¼&mut[i32] å‹
    s1[0] = 6; // ã‚¹ãƒ©ã‚¤ã‚¹ã®æœ€åˆã®è¦ç´ ã‚’ 6 ã«ã™ã‚‹
    s1[1] *= 10; // 2 ç•ªç›®ã®è¦ç´ ã‚’ 10 å€ã™ã‚‹
    s1.swap(0, 1); // è¦ç´ ã‚’äº¤æ›ã™ã‚‹
    assert_eq!(s1, [30, 6]); // ã‚¹ãƒ©ã‚¤ã‚¹ã®å†…å®¹ã‚’ç¢ºèª

    // å‚ç…§å…ƒã®é…åˆ—ã®å†…å®¹ã‚’ç¢ºèª
    assert_eq!(a7, [5, 30, 6, 2]); // ã‚¹ãƒ©ã‚¤ã‚¹ã‚’é€šã˜ã¦é…åˆ—ã®å†…å®¹ãŒå¤‰æ›´ã•ã‚ŒãŸ

    // ã‚¹ãƒ©ã‚¤ã‚¹ã«å¯¾ã™ã‚‹ä¸»ãªæ“ä½œ
    let a8: [i32; 0] = [];
    let s2 = &a8; // ä¸å¤‰ã®ã‚¹ãƒ©ã‚¤ã‚¹ã‚’ä½œæˆ
    assert!(s2.is_empty()); // ç©ºã®ã‚¹ãƒ©ã‚¤ã‚¹
    assert_eq!(s2.len(), 0); // é•·ã•ã¯ 0
    assert_eq!(s2.first(), None); // æœ€åˆã®è¦ç´ ã¯å­˜åœ¨ã—ãªã„

    let a9 = ["zero", "one", "two", "three", "four"];
    let s3 = &a9[1..4]; // ä¸å¤‰ã®ã‚¹ãƒ©ã‚¤ã‚¹ã‚’ä½œæˆ
    assert!(!s3.is_empty()); // ç©ºã§ã¯ãªã„
    assert_eq!(s3.len(), 3); // é•·ã•ã¯ 3
    assert_eq!(s3.first(), Some(&"one")); // æœ€åˆã®è¦ç´ 

    assert_eq!(s3[1], "two"); // 2 ç•ªç›®ã®è¦ç´ 
                              // assert_eq!(s3[3], "?"); // 4 ç•ªç›®ã®è¦ç´ ï¼å­˜åœ¨ã—ãªã„ã®ã§ãƒ‘ãƒ‹ãƒƒã‚¯ã™ã‚‹
    assert_eq!(s3.get(1), Some(&"two")); // 2 ç•ªç›®ã®è¦ç´ ã‚’å¾—ã‚‹åˆ¥ã®æ–¹æ³•
    assert_eq!(s3.get(3), None); // 4 ç•ªç›®ã®è¦ç´ ï¼å­˜åœ¨ã—ãªã„ã®ã§ None

    assert!(s3.contains(&"two")); // "two" ã‚’è¦ç´ ã«æŒã¤
    assert!(s3.starts_with(&["one", "two"])); // "one", "two" ã§å§‹ã¾ã‚‹
    assert!(s3.ends_with(&["two", "three"])); // "two", "three" ã§çµ‚ã‚ã‚‹

    // æ¬¡ã¯å¯å¤‰ã®ã‚¹ãƒ©ã‚¤ã‚¹ã ã‘ã§å¯èƒ½ãªæ“ä½œ
    let mut a10 = [6, 4, 2, 8, 0, 9, 4, 3, 7, 5, 1, 7];

    // ä¸€éƒ¨ã®è¦ç´ ã‚’æ˜‡é †ã«ã‚½ãƒ¼ãƒˆã™ã‚‹
    // &mut ã‚’çœç•¥ã—ã¦ã‚‚çµæœã¯åŒã˜ï¼å‹å¼·åˆ¶ã«ã‚ˆã£ã¦è‡ªå‹•çš„ã«ã‚¹ãƒ©ã‚¤ã‚¹ãŒä½œã‚‰ã‚Œã‚‹
    &mut a10[2..6].sort();
    assert_eq!(&a10[2..6], &[0, 2, 8, 9]);

    // ã‚¹ãƒ©ã‚¤ã‚¹ã‚’ 2 ã¤ã®å¯å¤‰ã‚¹ãƒ©ã‚¤ã‚¹ã¸åˆ†å‰²ã™ã‚‹
    let (s4a, s4b) = &mut a10.split_at_mut(5);

    // å‰åŠã‚’é€†é †ã«ã™ã‚‹
    s4a.reverse();
    assert_eq!(s4a, &[8, 2, 0, 4, 6]);

    // å¾ŒåŠã‚’æ˜‡é †ã«ã‚½ãƒ¼ãƒˆã™ã‚‹
    s4b.sort_unstable();
    assert_eq!(s4b, &[1, 3, 4, 5, 7, 7, 9]);

    // sort() ã¨ sort_unstable() ã®é•ã„
    // sort() ã¯å®‰å®šã‚½ãƒ¼ãƒˆãªã®ã§åŒé †ãªãƒ‡ãƒ¼ã‚¿ã®ã‚½ãƒ¼ãƒˆå‰ã®é †åºãŒã‚½ãƒ¼ãƒˆå¾Œã‚‚ä¿å­˜ã•ã‚Œã‚‹
    // sort_unstable() ã¯å®‰å®šã‚½ãƒ¼ãƒˆã§ã¯ãªã„ãŒï¼Œä¸€èˆ¬çš„ã« sort() ã‚ˆã‚Šé«˜é€Ÿ

    // æ–‡å­—åˆ—ã‚¹ãƒ©ã‚¤ã‚¹
    let str1 = "abc1"; // &'static str å‹
    let str2 = "abc2";
    assert!(str1 < str2);
    assert!(str1 != str2);

    let str3 = "æ–‡å­—åˆ—ã‚’è¤‡æ•°è¡Œã«æ¸¡ã£ã¦æ›¸ãã¨
        æ”¹è¡Œã‚„ã‚¹ãƒšãƒ¼ã‚¹ãŒå…¥ã‚‹";
    let str4 = "è¡Œæœ«ã«ãƒãƒƒã‚¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚’ä»˜ã‘ã‚‹ã¨\
        æ”¹è¡Œãªã©ãŒå…¥ã‚‰ãªã„";
    assert_eq!(
        str3,
        "æ–‡å­—åˆ—ã‚’è¤‡æ•°è¡Œã«æ¸¡ã£ã¦æ›¸ãã¨\n        æ”¹è¡Œã‚„ã‚¹ãƒšãƒ¼ã‚¹ãŒå…¥ã‚‹"
    );
    assert_eq!(str4, "è¡Œæœ«ã«ãƒãƒƒã‚¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚’ä»˜ã‘ã‚‹ã¨æ”¹è¡Œãªã©ãŒå…¥ã‚‰ãªã„");

    let str5 = "æ–‡å­—åˆ—ã«\"ã¨\\ã‚’å«ã‚ã‚‹"; // ãƒãƒƒã‚¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã§ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—
    let str6 = r#"æ–‡å­—åˆ—ã«"ã¨\ã‚’å«ã‚ã‚‹"#; // raw æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ï¼æ­£è¦è¡¨ç¾ãªã©ã«ä¾¿åˆ©
    assert_eq!(str5, str6);

    let str7 = r###"ã“ã®ã‚ˆã†ã«#ã®æ•°ã‚’å¢—ã‚„ã™ã¨"##"ãŒã‚ã£ã¦ã‚‚å¤§ä¸ˆå¤«"###;
    assert_eq!(str7, "ã“ã®ã‚ˆã†ã«#ã®æ•°ã‚’å¢—ã‚„ã™ã¨\"##\"ãŒã‚ã£ã¦ã‚‚å¤§ä¸ˆå¤«");

    let fruits = "ã‚ã‹ã‚Šã‚“ã”, ã‚ãŠã‚Šã‚“ã”\nãƒ©ã‚ºãƒ™ãƒªãƒ¼, ãƒ–ãƒ©ãƒƒã‚¯ãƒ™ãƒªãƒ¼";

    // lines() ãƒ¡ã‚½ãƒƒãƒ‰ã¯æ”¹è¡Œã‚³ãƒ¼ãƒ‰(\n)ã‚’å«ã‚€æ–‡å­—åˆ—ã‹ã‚‰1è¡Œãšã¤
    // å–ã‚Šå‡ºã›ã‚‹ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’ä½œã‚‹
    let mut lines = fruits.lines();
    // ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã® next() ãƒ¡ã‚½ãƒƒãƒ‰ã§æ¬¡ã®è¡Œã‚’å¾—ã‚‹
    let apple_line = lines.next();
    assert_eq!(apple_line, Some("ã‚ã‹ã‚Šã‚“ã”, ã‚ãŠã‚Šã‚“ã”"));
    assert_eq!(lines.next(), Some("ãƒ©ã‚ºãƒ™ãƒªãƒ¼, ãƒ–ãƒ©ãƒƒã‚¯ãƒ™ãƒªãƒ¼"));
    assert_eq!(lines.next(), None);

    // ã‚Šã‚“ã”ã®è¡Œ (Some(..)) ã®ä¸­èº«ã‚’å–ã‚Šå‡ºã™
    if let Some(apples) = apple_line {
        // ã€Œã‚ã‹ã€ã§å§‹ã¾ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
        assert!(apples.starts_with("ã‚ã‹"));
        // ã€Œã‚Šã‚“ã”ã€ã®æ–‡å­—ã‚’å«ã‚€ã‹ãƒã‚§ãƒƒã‚¯
        assert!(apples.contains("ã‚Šã‚“ã”"));
        // ã€Œã‚ãŠã€ãŒæœ€åˆã«å‡ºç¾ã™ã‚‹ä½ç½® (UTF-8è¡¨ç¾ã§ä½•ãƒã‚¤ãƒˆç›®) ã‚’å¾—ã‚‹
        assert_eq!(apples.find("ã‚ãŠ"), Some(17)); // 0 å§‹ã¾ã‚Šãªã®ã§ 18 ãƒã‚¤ãƒˆç›®

        // æ–‡å­—åˆ—ã‚’ã‚«ãƒ³ãƒ (,) ã§åˆ†å‰²ã™ã‚‹ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’ä½œã‚‹
        let mut apple_iter = apples.split(",");
        assert_eq!(apple_iter.next(), Some("ã‚ã‹ã‚Šã‚“ã”"));

        let green = apple_iter.next();
        // å·¦å´ã«ä½™ç™½ãŒã‚ã‚‹
        assert_eq!(green, Some(" ã‚ãŠã‚Šã‚“ã”"));
        // Some(..) ã®å†…å®¹ã« str ã® trim() ãƒ¡ã‚½ãƒƒãƒ‰ã‚’é©ç”¨ã—ã¦ä½™ç™½ã‚’å–ã‚Šé™¤ã
        assert_eq!(green.map(str::trim), Some("ã‚ãŠã‚Šã‚“ã”"));

        assert_eq!(apple_iter.next(), None);
    } else {
        unreachable!();
    }

    // s5 ã‹ã‚‰ s8 ã¯ã©ã‚Œã‚‚ç”»é¢ä¸Šã§ã¯ 1 æ–‡å­—ã¨ã—ã¦è¡¨ç¤ºã•ã‚Œã‚‹
    let s5 = "a"; // 61
    let s6 = "ã‚"; // E3 81 *2
    let s7 = "ğŸ˜„"; // F0 9F 98 80
    let s8 = "ğŸ‡¯ğŸ‡µ"; // F0 9F 87 AF F0 9F 87 B5

    // len() ãƒ¡ã‚½ãƒƒãƒ‰ã¯ UTF-8 ã®ãƒã‚¤ãƒˆæ•°ã‚’è¿”ã™
    assert_eq!(s5.len(), 1);
    assert_eq!(s6.len(), 3);
    assert_eq!(s7.len(), 4);
    assert_eq!(s8.len(), 8);

    let s9 = "abcã‚ã„ã†";
    assert_eq!(s9.get(0..1), Some("a"));
    assert_eq!(s9.get(3..6), Some("ã‚"));
    assert_eq!(s9.get(3..4), None); // UTF-8 ã¨ã—ã¦è§£é‡ˆã§ããªã„å ´åˆ

    let s10 = "ã‹ã‹\u{3099}ã";
    println!("{}", s10);

    let mut iter_s10 = s10.chars(); // chars() ã®ä»£ã‚ã‚Šã« char_indices() ã‚’ä½¿ã†ã¨ char ã¨ str ä¸Šã®é–‹å§‹ãƒã‚¤ãƒˆãŒãƒšã‚¢ã«ãªã£ãŸã‚¿ãƒ—ãƒ«ãŒå¾—ã‚‰ã‚Œã‚‹
    assert_eq!(iter_s10.next(), Some('ã‹'));
    assert_eq!(iter_s10.next(), Some('ã‹'));
    assert_eq!(iter_s10.next(), Some('\u{3099}'));
    assert_eq!(iter_s10.next(), Some('ã'));
    assert_eq!(iter_s10.next(), None);

    let utf8: [u8; 4] = [0x61, 0xe3, 0x81, 0x82];
    assert_eq!(std::str::from_utf8(&utf8), Ok("aã‚"));

    let bad_utf8: [u8; 2] = [0x81, 0x33]; // ã§ãŸã‚‰ã‚ãªãƒã‚¤ãƒˆåˆ—
    let result2 = std::str::from_utf8(&bad_utf8);
    assert!(result2.is_err());
    println!("{:?}", result2);

    // æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ« (&'static str) ã‹ã‚‰ &mut str ã¯ç›´æ¥å¾—ã‚‰ã‚Œãªã„
    // ã¾ãšæ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã‚’ String ã¸å¤‰æ›ã—ï¼Œãã“ã‹ã‚‰ &mut str ã‚’å–ã‚Šå‡ºã™
    let mut string1 = "abcã‚ã„ã†".to_string(); // String å‹

    // &mut str ã‚’å¾—ã‚‹ï¼ã“ã‚Œã¯ String ãŒæŒã¤ UTF-8 ãƒã‚¤ãƒˆåˆ—ã‚’æŒ‡ã™å¯å¤‰ã‚¹ãƒ©ã‚¤ã‚¹
    let str8 = string1.as_mut_str(); // &mut str å‹

    // è‹±å°æ–‡å­—ã‚’å¤§æ–‡å­—ã«å¤‰æ›´
    str8.make_ascii_uppercase();
    assert_eq!(str8, "ABCã‚ã„ã†");

    // &mut str ã® UTF-8 ãƒã‚¤ãƒˆåˆ—ã‚’ç›´æ¥æ“ä½œã—ã¦ "ã‚" ( 3 ãƒã‚¤ãƒˆ) ã‚’ "*a*" ã«å¤‰æ›´ã™ã‚‹
    let b = unsafe { str8.as_bytes_mut() };
    b[3] = b'*';
    b[4] = b'a';
    b[5] = b'*';

    // å¤§å…ƒã® String ãŒå¤‰æ›´ã•ã‚Œã¦ã„ã‚‹
    assert_eq!(string1, "ABC*a*ã„ã†");
}

// ã“ã®é–¢æ•°ã¯ &[char] å‹ã®ã‚¹ãƒ©ã‚¤ã‚¹ã‚’å¼•æ•°ã«å–ã‚Šï¼Œãã®æƒ…å ±ã‚’è¡¨ç¤ºã™ã‚‹
fn print_info(name: &str, sl: &[char]) {
    println!(
        "  {:9} - {}, {:?}, {:?}, {:?}",
        name,
        sl.len(),   // é•·ã• (ãƒã‚¤ãƒˆæ•°) usize å‹
        sl.first(), // æœ€åˆã®è¦ç´       Option<char> å‹
        sl[1],      // 2 ç•ªç›®ã®è¦ç´     char å‹
        sl.last()   // æœ€å¾Œã®è¦ç´       Option<char> å‹
    );
}
